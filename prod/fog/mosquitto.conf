# This is a minimal configuration file for the broker.

# Allow clients to connect without a username or password.
# WARNING: Do not use this in a production environment without authentication.
allow_anonymous true

# Enable persistence to save messages for offline clients
persistence true
persistence_location /mosquitto/data/

# Log configuration
log_dest file /mosquitto/log/mosquitto.log
log_type all

# --- Expiry & Retention Settings ---

# NOTE: Broker-side enforcement of specific expiry intervals is 
# generally done via plugins or is client-driven in MQTTv5.
# We have removed the invalid config lines.

# You can limit the number of retained messages (0 = no limit)
# max_retained_messages 0

# Default MQTT listener on port 1883
listener 1883

# WebSocket listener on port 9001
listener 9001
protocol websockets
